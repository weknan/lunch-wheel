<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆé¤éšæœºè½¬ç›˜ï¼ˆå¤šèœå“ç‰ˆï¼‰</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Microsoft Yahei", sans-serif;
            background-color: #f5f5f5;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 50px;
        }

        /* è½¬ç›˜å®¹å™¨ */
        .wheel-container {
            position: relative;
            width: 350px;
            height: 350px;
            margin-bottom: 40px;
        }

        /* è½¬ç›˜æ ·å¼ - åŠ¨æ€é€‚é…åˆ†åŒºé¢œè‰² */
        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            border: 5px solid #fff;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            transition: transform 3s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        /* è½¬ç›˜ä¸­å¿ƒæŒ‰é’® */
        .wheel-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: #fff;
            border: 3px solid #ff6b6b;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #ff6b6b;
            z-index: 10;
            box-shadow: 0 0 10px rgba(0,0,0,0.2);
            user-select: none;
        }

        .wheel-center:active {
            transform: translate(-50%, -50%) scale(0.95);
        }

        /* èœå“æ–‡å­— */
        .wheel-item {
            position: absolute;
            width: 100%;
            height: 100%;
            text-align: center;
            transform-origin: center center;
            color: #fff;
            font-weight: bold;
            font-size: 14px;
        }

        .wheel-item span {
            display: inline-block;
            width: 120px;
            transform: translateY(30px);
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        /* æŒ‡é’ˆ */
        .pointer {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 18px solid transparent;
            border-right: 18px solid transparent;
            border-bottom: 35px solid #ff6b6b;
            z-index: 5;
        }

        /* ç»“æœæç¤º */
        .result {
            font-size: 22px;
            color: #333;
            margin-bottom: 20px;
            height: 35px;
            line-height: 35px;
            font-weight: bold;
        }

        /* è‡ªå®šä¹‰èœå“æŒ‰é’® */
        .custom-btn {
            padding: 12px 24px;
            background: #4ecdc4;
            color: #fff;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 10px;
            transition: background 0.2s;
        }

        .custom-btn:hover {
            background: #38b0a9;
        }

        /* èœå“æ•°é‡æç¤º */
        .tip {
            font-size: 14px;
            color: #666;
            margin-top: 10px;
        }
    </style>
</head>
<body>
<div class="result" id="result">ç‚¹å‡»è½¬ç›˜å¼€å§‹é€‰æ‹©åˆé¤ï½</div>

<div class="wheel-container">
    <!-- æŒ‡é’ˆ -->
    <div class="pointer"></div>

    <!-- è½¬ç›˜ï¼ˆåŠ¨æ€ç”Ÿæˆèœå“é¡¹ï¼‰ -->
    <div class="wheel" id="wheel"></div>

    <!-- ä¸­å¿ƒæŒ‰é’® -->
    <div class="wheel-center" id="wheelBtn">å¼€å§‹</div>
</div>

<button class="custom-btn" id="customBtn">è‡ªå®šä¹‰èœå“</button>
<p class="tip" id="tip">å½“å‰èœå“æ•°é‡ï¼š8ä¸ª | æ”¯æŒä»»æ„æ•°é‡è‡ªå®šä¹‰</p>

<script>
    // åˆå§‹èœå“åˆ—è¡¨ï¼ˆ8ä¸ªï¼Œå¯è‡ªè¡Œå¢å‡ï¼‰
    let foodList = [
        'éº»è¾£çƒ«', 'èºè›³ç²‰', 'ç‚¸é¸¡', 'ç‰›è‚‰é¢',
        'ç›–æµ‡é¥­', 'æ±‰å ¡', 'ç«é”…', 'çƒ§çƒ¤'
    ];
    // è½¬ç›˜é…è‰²ï¼ˆå¯æ ¹æ®èœå“æ•°é‡æ‰©å±•ï¼‰
    const colorList = [
        '#ff6b6b', '#4ecdc4', '#f9c74f', '#90be6d',
        '#577590', '#f8961e', '#7209b7', '#f72585',
        '#4361ee', '#f8961e', '#9d4edd', '#06d6a0'
    ];
    // æ ‡è®°æ˜¯å¦æ­£åœ¨æ—‹è½¬
    let isRotating = false;

    const wheel = document.getElementById('wheel');
    const wheelBtn = document.getElementById('wheelBtn');
    const result = document.getElementById('result');
    const customBtn = document.getElementById('customBtn');
    const tip = document.getElementById('tip');

    // åˆå§‹åŒ–è½¬ç›˜ï¼ˆæ ¸å¿ƒï¼šæ ¹æ®èœå“æ•°é‡è‡ªåŠ¨è®¡ç®—è§’åº¦å’Œåˆ†åŒºï¼‰
    function initWheel() {
        // æ¸…ç©ºåŸæœ‰å†…å®¹
        wheel.innerHTML = '';
        const foodCount = foodList.length;
        // æ¯ä¸ªèœå“å çš„è§’åº¦
        const degPerItem = 360 / foodCount;

        // ç”Ÿæˆè½¬ç›˜èƒŒæ™¯ï¼ˆé”¥å½¢æ¸å˜ï¼‰
        let gradient = 'conic-gradient(';
        foodList.forEach((_, index) => {
            const startDeg = index * degPerItem;
            const endDeg = (index + 1) * degPerItem;
            const color = colorList[index % colorList.length];
            gradient += `${color} ${startDeg}deg ${endDeg}deg,`;
        });
        // ç§»é™¤æœ€åä¸€ä¸ªé€—å·ï¼Œè¡¥å…¨æ¸å˜
        gradient = gradient.slice(0, -1) + ')';
        wheel.style.background = gradient;

        // ç”Ÿæˆæ¯ä¸ªèœå“çš„æ–‡å­—é¡¹
        foodList.forEach((food, index) => {
            // æ–‡å­—å±…ä¸­çš„è§’åº¦ï¼ˆæ¯ä¸ªåˆ†åŒºçš„ä¸­é—´è§’åº¦ï¼‰
            const textDeg = index * degPerItem + degPerItem / 2;
            const item = document.createElement('div');
            item.className = 'wheel-item';
            item.style.transform = `rotate(${textDeg}deg)`;
            item.innerHTML = `<span>${food}</span>`;
            wheel.appendChild(item);
        });

        // æ›´æ–°æç¤º
        tip.textContent = `å½“å‰èœå“æ•°é‡ï¼š${foodCount}ä¸ª | æ”¯æŒä»»æ„æ•°é‡è‡ªå®šä¹‰`;
    }

    // æ—‹è½¬è½¬ç›˜é€»è¾‘ï¼ˆé€‚é…ä»»æ„èœå“æ•°é‡ï¼‰
    wheelBtn.addEventListener('click', () => {
        if (isRotating) return;
        isRotating = true;
        result.textContent = "æ­£åœ¨éšæœºé€‰æ‹©ä¸­...";

        // éšæœºç”Ÿæˆæ—‹è½¬è§’åº¦ï¼ˆ360*N + éšæœºè§’åº¦ï¼Œä¿è¯è½¬å¤Ÿå¤šåœˆï¼‰
        const randomDeg = 360 * 6 + Math.floor(Math.random() * 360);
        wheel.style.transform = `rotate(${randomDeg}deg)`;

        // æ—‹è½¬ç»“æŸåè®¡ç®—ç»“æœ
        setTimeout(() => {
            const foodCount = foodList.length;
            const degPerItem = 360 / foodCount;
            // è®¡ç®—æœ€ç»ˆæŒ‡å‘çš„è§’åº¦ï¼ˆå–æ¨¡360ï¼‰
            const finalDeg = randomDeg % 360;
            // è®¡ç®—å¯¹åº”èœå“ç´¢å¼•ï¼ˆæŒ‡é’ˆæŒ‡å‘çš„åˆ†åŒºï¼‰
            // æ³¨æ„ï¼šæŒ‡é’ˆåœ¨é¡¶éƒ¨ï¼ˆ0åº¦ï¼‰ï¼Œæ‰€ä»¥è¦åå‘è®¡ç®—
            const index = Math.floor((360 - finalDeg) / degPerItem) % foodCount;
            result.textContent = `æ­å–œï¼åˆé¤å°±åƒï¼š${foodList[index]} ğŸ‰`;
            isRotating = false;
        }, 3000);
    });

    // è‡ªå®šä¹‰èœå“é€»è¾‘
    customBtn.addEventListener('click', () => {
        const defaultText = foodList.join(',');
        const newFoods = prompt(
            'è¯·è¾“å…¥ä½ æƒ³åƒçš„èœå“ï¼Œç”¨è‹±æ–‡é€—å·åˆ†éš”ï¼ˆæ•°é‡ä¸é™ï¼‰',
            defaultText
        );
        if (!newFoods) return;

        // å¤„ç†è¾“å…¥ï¼šå»ç©ºã€å»é‡
        const newFoodArray = newFoods.split(',')
            .map(item => item.trim())
            .filter(item => item)
            .filter((item, index, arr) => arr.indexOf(item) === index);

        if (newFoodArray.length === 0) {
            alert('è¯·è‡³å°‘è¾“å…¥1ä¸ªèœå“ï¼');
            return;
        }

        // æ›´æ–°èœå“åˆ—è¡¨å¹¶é‡æ–°åˆå§‹åŒ–è½¬ç›˜
        foodList = newFoodArray;
        initWheel();
        result.textContent = 'èœå“å·²æ›´æ–°ï¼Œç‚¹å‡»è½¬ç›˜å¼€å§‹é€‰æ‹©ï½';
        // é‡ç½®è½¬ç›˜è§’åº¦
        wheel.style.transform = 'rotate(0deg)';
    });

    // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–è½¬ç›˜
    initWheel();
</script>
</body>
</html>